/* SPDX-License-Identifier: GPL-2.0-only OR MIT */

/*
 * This file is created based on MT8196 Functional Specification
 * Chapter number: 14.2.4
 */

#ifndef SOC_MEDIATEK_MT8196_MT6685_RTC_H
#define SOC_MEDIATEK_MT8196_MT6685_RTC_H

#include <commonlib/bsd/bcd.h>
#include <console/console.h>
#include <rtc.h>
#include <stdbool.h>
#include <timer.h>

/* frequency meter related */
#define RG_BANK_FQMTR_RST		MT6685_RG_BANK_FQMTR_RST_ADDR
#define RG_BANK_FQMTR_RST_MASK		MT6685_RG_BANK_FQMTR_RST_MASK
#define RG_BANK_FQMTR_RST_SHIFT		MT6685_RG_BANK_FQMTR_RST_SHIFT
#define RG_FQMTR_TCKSEL			MT6685_FQMTR_TCKSEL_ADDR
#define RG_FQMTR_WINSET			MT6685_FQMTR_WINSET_L_ADDR
#define RG_FQMTR_BUSY			MT6685_FQMTR_BUSY_ADDR
#define RG_FQMTR_DCXO26M_EN		MT6685_FQMTR_DCXO26M_EN_ADDR
#define RG_FQMTR_DCXO26M_MASK		MT6685_FQMTR_DCXO26M_EN_MASK
#define RG_FQMTR_DCXO26M_SHIFT		MT6685_FQMTR_DCXO26M_EN_SHIFT
#define RG_FQMTR_DATA			MT6685_FQMTR_DATA_L_ADDR
#define RG_FQMTR_EN			MT6685_FQMTR_EN_ADDR
#define RG_FQMTR_EN_MASK		MT6685_FQMTR_EN_MASK
#define RG_FQMTR_EN_SHIFT		MT6685_FQMTR_EN_SHIFT

#define RG_FQMTR_32K_CK_PDN_SET		MT6685_TOP_CKPDN_CON0_SET_ADDR
#define RG_FQMTR_32K_CK_PDN_CLR		MT6685_TOP_CKPDN_CON0_CLR_ADDR
#define RG_FQMTR_32K_CK_PDN_MASK	MT6685_RG_FQMTR_32K_CK_PDN_MASK
#define RG_FQMTR_32K_CK_PDN_SHIFT	MT6685_RG_FQMTR_32K_CK_PDN_SHIFT

#define RG_FQMTR_CLK_CK_PDN_SET		MT6685_TOP_CKPDN_CON0_SET_ADDR
#define RG_FQMTR_CLK_CK_PDN_CLR		MT6685_TOP_CKPDN_CON0_CLR_ADDR
#define RG_FQMTR_CLK_CK_PDN_MASK	MT6685_RG_FQMTR_CK_PDN_MASK
#define RG_FQMTR_CLK_CK_PDN_SHIFT	MT6685_RG_FQMTR_CK_PDN_SHIFT

#define RG_FQMTR_CKSEL			MT6685_RG_FQMTR_CK_CKSEL_ADDR
#define RG_FQMTR_CKSEL_SET		MT6685_TOP_CKSEL_CON0_SET_ADDR
#define RG_FQMTR_CKSEL_CLR		MT6685_TOP_CKSEL_CON0_CLR_ADDR
#define RG_FQMTR_CKSEL_MASK		MT6685_RG_FQMTR_CK_CKSEL_MASK
#define RG_FQMTR_CKSEL_SHIFT		MT6685_RG_FQMTR_CK_CKSEL_SHIFT
#define RG_FQMTR_TCKSEL_MASK		MT6685_FQMTR_TCKSEL_MASK
#define RG_FQMTR_TCKSEL_SHIFT		MT6685_FQMTR_TCKSEL_SHIFT

#define FQMTR_FIX_CLK_26M		(0 << RG_FQMTR_CKSEL_SHIFT)
#define FQMTR_FIX_CLK_XOSC_32K_DET	(1 << RG_FQMTR_CKSEL_SHIFT)
#define FQMTR_FIX_CLK_EOSC_32K		(2 << RG_FQMTR_CKSEL_SHIFT)
#define FQMTR_FIX_CLK_RTC_32K		(3 << RG_FQMTR_CKSEL_SHIFT)
#define FQMTR_FIX_CLK_SMPS_CK		(4 << RG_FQMTR_CKSEL_SHIFT)
#define FQMTR_FIX_CLK_TCK_SEC		(5 << RG_FQMTR_CKSEL_SHIFT)
#define FQMTR_FIX_CLK_PMU_75K		(6 << RG_FQMTR_CKSEL_SHIFT)

#define BANK_FQMTR_RST			BIT(6)
#define FQMTR_EN			BIT(7)
#define FQMTR_BUSY			BIT(3)
#define FQMTR_DCXO26M_EN		BIT(4)
#define FQMTR_XOSC32_CK			0
#define FQMTR_DCXO_F32K_CK		1
#define FQMTR_EOSC32_CK			2
#define FQMTR_XOSC32_CK_DETECTON	3
#define FQMTR_FQM26M_CK			4
#define FQMTR_FQM32K_CK			5
#define FQMTR_TEST_CK			6
#define FQMTR_WINSET			0x0000

#define RG_75K_32K_SEL			MT6685_TOP_CKSEL_CON0_CLR_ADDR
#define RTC_75K_TO_32K			BIT(0)

#define RG_OCT1_RTC32K_1V8_0		MT6685_RG_OCT1_IO_0
#define RG_OCT1_RTC32K_1V8_0_MASK	0x3
#define RG_OCT1_RTC32K_1V8_0_SHIFT	5

#define RG_OCT1_RTC32K_1V8_F		MT6685_RG_OCT1_IO_1
#define RG_OCT1_RTC32K_1V8_F_MASK	0x3
#define RG_OCT1_RTC32K_1V8_F_SHIFT	1

#define HWCID_L				MT6685_HWCID_L

/* Complete the RTC initialization process and register settings. */
void rtc_boot(void);

#endif /* SOC_MEDIATEK_MT8196_MT6685_RTC_H */
